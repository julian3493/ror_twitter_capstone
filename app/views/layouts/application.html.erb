<!DOCTYPE html>
<html>
  <head>
    <title>RorTwitterCapstone</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <% if notice.present? %>
      <div class='notification is-primary global-notification advices'>
        <p> <%= notice %> </p>
      </div>
    <% end %>
    <% if alert.present? %>
      <div class='notification is-danger global-notification advices'>
        <p> <%= alert %> </p>
      </div>
    <% end %>
    <% if sign_in? %>
    <nav class="navbar bg-blue t-white">
      <div>
        <p class="no-wrap"><%= "Welcome #{current_user.username}" %></p>
        <%= link_to 'Log Out', session_path(session[:username]), method: :delete, class: "button is-primary" %>
      </div>
    </nav>

    <aside class="menu bg-dark t-gray">
      <div class= 'user-content'>
        <div class= image>
          <%= image_tag current_user.photo %>
        </div>
        <p class= 'username'>@<%= current_user.username %></p>
        <div class= 'followings'>
          <div class= 'follow'>
            <p><%= current_user.opinions.count %></p>
            <p>Opinions</p>
          </div>
          <div class= 'follow'>
            <p><%= current_user.followers.count %></p>
            <p>Followers</p>
          </div>
          <div class= 'follow'>
            <%= current_user.followeds.count %>
            <p>Following</p>
          </div>
        </div>
      </div>

      <ul class="menu-list t-gray">
        <li><%= link_to 'Home', root_path %></li>
        <li><%= link_to 'Your profile', user_path(current_user) %></li>
        <li><%= link_to 'Following', users_path %></li>
      </ul>
    </aside>
    <% end %>
    <main class="main">
      <%= yield %>
    </main>
  </body>
</html>
